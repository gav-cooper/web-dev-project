<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/js/singlePost.js" defer></script>
    <link rel="stylesheet" href="/css/singlePost.css">
    <title>Post</title>
</head>
<body>
    <div id="toolbar" class="toolbar-wrapper">
        <h1 id="website-title"><a href="/posts">Writing Space</a></h1>
        <ul class="link-container">
            <li id="posts"><a href="/posts">Home</a></li>
            <li id="Account"><a href="/account/<%= user.username %>">Account</a></li>
        </ul>
    </div>
    <p>Posted by: <a href="/users/<%= post.username %>"><%= post.username %></a></p>
    <div class="post-wrapper">
        <h1 id="subject"><%= post.subject %></h1>
        <p id="post"> <%= post.post %> </p>
        <span id="date"> Posted on <%= new Date(post.date).toLocaleDateString("en-US", {timeZone: "America/Chicago"}) %> </span>
        <span id="time"> at <%= new Date(post.date).toLocaleTimeString("en-US", {timeZone: "America/Chicago"}) %> </span>
        <div id="likes-wrapper">
            <p id="likes" <% if (liked) { %>
                class="liked"
            <% } else{ %>
                class="unliked"
            <% } %>
            >
                Likes: <span id="numLikes"><%= post.likes %></span>
            </p>
            <button id="likePost">
                <% if (liked) { %>
                    Unlike
                <% } else { %>
                    Like
                <% } %>
            </button>
        </div>
    </div>
    <div id="whitespace">
        <p></p>
    </div>
    <div class="leavecomment-container">
        <div>
            <h3 id="comment">Leave a comment...</h3>
        </div>
        <div>
            <form action="/posts/:postID/comment" method="post">
                <textarea rows="3" cols="40" placeholder="Enter text" id="leavecomment-textbox"></textarea>
                <input type="submit" id="leavecomment-submit" value="Submit">
            </form>
        </div>
    </div>
    <div class="comments-container">
            <% if (!!comments === false) { %>
                <span class="no-comments"
            <% } else { %>
                <% for (const comment of comments) {%>
                    <div style="flex: 0 0 100%">
                        <p>Posted by: <%= comments.commenter %></p><br>
                        <p><%= new Date(comments.date).toLocaleDateString("en-US", {timezone: "America/Chicago"}) %></p>
                    </div>
                    <div style="flex: 0 0 100%">
                        <p><%= comments.commentText %></p>
                    </div>
                <% } %>
            <% } %>
    </div>
</body>
</html>